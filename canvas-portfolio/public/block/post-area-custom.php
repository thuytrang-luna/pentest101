<?php
/**
 * Portfolio Custom
 *
 * @var        $attributes - block attributes
 * @var        $options - layout options
 *
 * @link       https://codesupply.co
 * @since      1.0.0
 *
 * @package    Canvas Portfolio
 * @subpackage Canvas Portfolio/includes
 */

$class_name = cnvsport_portfolio_area_classes( $attributes, $options );

if ( $attributes['custom_images'] && count( $attributes['custom_images'] ) > $attributes['number_items'] ) {
	$attributes['custom_images'] = array_slice( $attributes['custom_images'], 0, $attributes['number_items'] );
}

if ( $attributes['custom_images'] ) {
	?>
	<div class="<?php echo esc_attr( $class_name ); ?>">

		<div class="cnvs-portfolio-area__outer">
			<div class="cnvs-portfolio-area__main" <?php cnvsport_portfolio_area_main_attrs( $attributes, $options ); ?>>
				<?php
				// Start the Loop.
				foreach ( $attributes['custom_images'] as $attachment_id ) {

					// Get item project.
					if ( wp_get_attachment_image( $attachment_id ) ) {

						$portfolio_entry = new CNVSPort_Entry(
							$attributes, $options
						);

						// Set settings.
						$portfolio_entry->attachment_id = $attachment_id;

						// Init portfolio entry.
						$portfolio_entry->init();

						require apply_filters( 'cnvsport_portfolio_item_path', CNVSPORT_PATH . '/public/block/portfolio-entry.php', $attributes, $options, $portfolio_entry );
					}
				}
				?>
			</div>
		</div>
	</div>
	<?php
} else {
	require dirname( __FILE__ ) . '/post-area-none.php';
}

wp_reset_postdata();
